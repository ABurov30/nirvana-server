"use strict";var P=Object.create;var R=Object.defineProperty;var _=Object.getOwnPropertyDescriptor;var $=Object.getOwnPropertyNames;var j=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty;var q=(u,e)=>{for(var t in e)R(u,t,{get:e[t],enumerable:!0})},C=(u,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of $(e))!M.call(u,n)&&n!==t&&R(u,n,{get:()=>e[n],enumerable:!(i=_(e,n))||i.enumerable});return u};var O=(u,e,t)=>(t=u!=null?P(j(u)):{},C(e||!u||!u.__esModule?R(t,"default",{value:u,enumerable:!0}):t,u)),L=u=>C(R({},"__esModule",{value:!0}),u);var D={};q(D,{HelpersModule:()=>A});module.exports=L(D);var f=require("../../errors/faker-error"),S=require("../../internal/deprecated"),I=require("./luhn-check"),F=O(require("./unique"));function N(u,e,t,i){let n=1;if(e)switch(e){case"?":{n=u.datatype.boolean()?0:1;break}case"*":{let r=1;for(;u.datatype.boolean();)r*=2;n=u.number.int({min:0,max:r});break}case"+":{let r=1;for(;u.datatype.boolean();)r*=2;n=u.number.int({min:1,max:r});break}default:throw new f.FakerError("Unknown quantifier symbol provided.")}else t!=null&&i!=null?n=u.number.int({min:parseInt(t),max:parseInt(i)}):t!=null&&i==null&&(n=parseInt(t));return n}class A{constructor(e){this.faker=e;this.uniqueStore={};for(const t of Object.getOwnPropertyNames(A.prototype))t==="constructor"||typeof this[t]!="function"||(this[t]=this[t].bind(this))}slugify(e=""){return e.normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/ /g,"-").replace(/[^\w\.\-]+/g,"")}replaceSymbolWithNumber(e="",t="#"){let i="";for(let n=0;n<e.length;n++)e.charAt(n)===t?i+=this.faker.number.int(9):e.charAt(n)==="!"?i+=this.faker.number.int({min:2,max:9}):i+=e.charAt(n);return i}replaceSymbols(e=""){const t=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];let i="";for(let n=0;n<e.length;n++)e.charAt(n)==="#"?i+=this.faker.number.int(9):e.charAt(n)==="?"?i+=this.arrayElement(t):e.charAt(n)==="*"?i+=this.faker.datatype.boolean()?this.arrayElement(t):this.faker.number.int(9):i+=e.charAt(n);return i}replaceCreditCardSymbols(e="6453-####-####-####-###L",t="#"){e=this.regexpStyleStringParse(e),e=this.replaceSymbolWithNumber(e,t);const i=(0,I.luhnCheckValue)(e);return e.replace("L",String(i))}regexpStyleStringParse(e=""){const t=/(.)\{(\d+)\,(\d+)\}/,i=/(.)\{(\d+)\}/,n=/\[(\d+)\-(\d+)\]/;let r,l,s,m,o=t.exec(e);for(;o!=null;)r=parseInt(o[2]),l=parseInt(o[3]),r>l&&(s=l,l=r,r=s),m=this.faker.number.int({min:r,max:l}),e=e.slice(0,o.index)+o[1].repeat(m)+e.slice(o.index+o[0].length),o=t.exec(e);for(o=i.exec(e);o!=null;)m=parseInt(o[2]),e=e.slice(0,o.index)+o[1].repeat(m)+e.slice(o.index+o[0].length),o=i.exec(e);for(o=n.exec(e);o!=null;)r=parseInt(o[1]),l=parseInt(o[2]),r>l&&(s=l,l=r,r=s),e=e.slice(0,o.index)+this.faker.number.int({min:r,max:l}).toString()+e.slice(o.index+o[0].length),o=n.exec(e);return e}fromRegExp(e){var g,k;let t=!1;e instanceof RegExp&&(t=e.flags.includes("i"),e=e.toString(),e=(k=(g=e.match(/\/(.+?)\//))==null?void 0:g[1])!=null?k:"");let i,n,r;const l=/([.A-Za-z0-9])(?:\{(\d+)(?:\,(\d+)|)\}|(\?|\*|\+))(?![^[]*]|[^{]*})/;let s=e.match(l);for(;s!=null;){const w=s[2],T=s[3],b=s[4];r=N(this.faker,b,w,T),e=e.slice(0,s.index)+s[1].repeat(r)+e.slice(s.index+s[0].length),s=e.match(l)}const m=/(\d-\d|\w-\w|\d|\w|[-!@#$&()`.+,/"])/,o=/\[(\^|)(-|)(.+?)\](?:\{(\d+)(?:\,(\d+)|)\}|(\?|\*|\+)|)/;for(s=e.match(o);s!=null;){const w=s[1]==="^",T=s[2]==="-",b=s[4],K=s[5],G=s[6],c=[];let x=s[3],y=x.match(m);for(T&&c.push(45);y!=null;){if(y[0].indexOf("-")===-1)t&&isNaN(Number(y[0]))?(c.push(y[0].toUpperCase().charCodeAt(0)),c.push(y[0].toLowerCase().charCodeAt(0))):c.push(y[0].charCodeAt(0));else{const h=y[0].split("-").map(a=>a.charCodeAt(0));if(i=h[0],n=h[1],i>n)throw new f.FakerError("Character range provided is out of order.");for(let a=i;a<=n;a++)if(t&&isNaN(Number(String.fromCharCode(a)))){const E=String.fromCharCode(a);c.push(E.toUpperCase().charCodeAt(0)),c.push(E.toLowerCase().charCodeAt(0))}else c.push(a)}x=x.substring(y[0].length),y=x.match(m)}if(r=N(this.faker,G,b,K),w){let h=-1;for(let a=48;a<=57;a++){if(h=c.indexOf(a),h>-1){c.splice(h,1);continue}c.push(a)}for(let a=65;a<=90;a++){if(h=c.indexOf(a),h>-1){c.splice(h,1);continue}c.push(a)}for(let a=97;a<=122;a++){if(h=c.indexOf(a),h>-1){c.splice(h,1);continue}c.push(a)}}const v=this.multiple(()=>String.fromCharCode(this.arrayElement(c)),{count:r}).join("");e=e.slice(0,s.index)+v+e.slice(s.index+s[0].length),s=e.match(o)}const d=/(.)\{(\d+)\,(\d+)\}/;for(s=e.match(d);s!=null;){if(i=parseInt(s[2]),n=parseInt(s[3]),i>n)throw new f.FakerError("Numbers out of order in {} quantifier.");r=this.faker.number.int({min:i,max:n}),e=e.slice(0,s.index)+s[1].repeat(r)+e.slice(s.index+s[0].length),s=e.match(d)}const p=/(.)\{(\d+)\}/;for(s=e.match(p);s!=null;)r=parseInt(s[2]),e=e.slice(0,s.index)+s[1].repeat(r)+e.slice(s.index+s[0].length),s=e.match(p);return e}shuffle(e,t={}){const{inplace:i=!1}=t;i||(e=[...e]);for(let n=e.length-1;n>0;--n){const r=this.faker.number.int(n);[e[n],e[r]]=[e[r],e[n]]}return e}uniqueArray(e,t){if(Array.isArray(e)){const n=new Set(e),r=Array.from(n);return this.shuffle(r).splice(0,t)}const i=new Set;try{if(typeof e=="function")for(;i.size<t;)i.add(e())}catch{}return Array.from(i)}mustache(e,t){if(e==null)return"";for(const i in t){const n=new RegExp(`{{${i}}}`,"g");let r=t[i];typeof r=="string"&&(r=r.replace(/\$/g,"$$$$")),e=e.replace(n,r)}return e}maybe(e,t={}){if(this.faker.datatype.boolean(t))return e()}objectKey(e){const t=Object.keys(e);return this.arrayElement(t)}objectValue(e){const t=this.faker.helpers.objectKey(e);return e[t]}objectEntry(e){const t=this.faker.helpers.objectKey(e);return[t,e[t]]}arrayElement(e){if(e==null)throw new f.FakerError("Calling `faker.helpers.arrayElement()` without arguments is no longer supported.");if(e.length===0)throw new f.FakerError("Cannot get value from empty dataset.");const t=e.length>1?this.faker.number.int({max:e.length-1}):0;return e[t]}weightedArrayElement(e){if(e.length===0)throw new f.FakerError("weightedArrayElement expects an array with at least one element");if(!e.every(r=>r.weight>0))throw new f.FakerError("weightedArrayElement expects an array of { weight, value } objects where weight is a positive number");const t=e.reduce((r,{weight:l})=>r+l,0),i=this.faker.number.float({min:0,max:t,precision:1e-9});let n=0;for(const{weight:r,value:l}of e)if(n+=r,i<n)return l;return e[e.length-1].value}arrayElements(e,t){if(e==null)throw new f.FakerError("Calling `faker.helpers.arrayElements()` without arguments is no longer supported.");if(e.length===0)return[];const i=this.rangeToNumber(t!=null?t:{min:1,max:e.length});if(i>=e.length)return this.shuffle(e);if(i<=0)return[];const n=e.slice(0);let r=e.length;const l=r-i;let s,m;for(;r-- >l;)m=this.faker.number.int(r),s=n[m],n[m]=n[r],n[r]=s;return n.slice(l)}enumValue(e){const t=Object.keys(e).filter(n=>isNaN(Number(n))),i=this.arrayElement(t);return e[i]}fake(e){e=typeof e=="string"?e:this.arrayElement(e);const t=e.search(/{{[a-z]/),i=e.indexOf("}}",t);if(t===-1||i===-1)return e;let r=e.substring(t+2,i+2).replace("}}","").replace("{{","");const l=/\(([^)]*)\)/,s=l.exec(r);let m="";s&&(r=r.replace(l,""),m=s[1]);const o=r.split(".");let d=this.faker,p=this.faker.rawDefinitions;for(const b of o)d=d==null?void 0:d[b],p=p==null?void 0:p[b];let g;if(typeof d=="function")g=d;else if(Array.isArray(p))g=()=>this.faker.helpers.arrayElement(p);else throw new f.FakerError(`Invalid module method or definition: ${r}
- faker.${r} is not a function
- faker.definitions.${r} is not an array`);g=g.bind(this);let k;try{k=JSON.parse(`[${m}]`)}catch{k=[m]}const w=String(g(...k)),T=e.substring(0,t)+w+e.substring(i+2);return this.fake(T)}rangeToNumber(e){return typeof e=="number"?e:this.faker.number.int(e)}unique(e,t=[],i={}){(0,S.deprecated)({deprecated:"faker.helpers.unique",proposed:"https://github.com/faker-js/faker/issues/1785#issuecomment-1407773744",since:"8.0",until:"9.0"});const{maxTime:n=50,maxRetries:r=50,exclude:l=[],store:s=this.uniqueStore}=i;return F.exec(e,t,{...i,startTime:new Date().getTime(),maxTime:n,maxRetries:r,currentIterations:0,exclude:l,store:s})}multiple(e,t={}){var n;const i=this.rangeToNumber((n=t.count)!=null?n:3);return i<=0?[]:Array.from({length:i},e)}}0&&(module.exports={HelpersModule});
